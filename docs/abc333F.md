# AtCoder Beginner Contest 333 F - Bomb Game 2
## 問題概要
N人が一列に並んで人iは先頭からi番目に並んでいる。先頭に並んでいる人を1/2の確率で列から取り除き、そうでない場合は列の末尾に移す。i番目の人が1人になる確率は？

## 考えたこと
O(N^3)から計算量を落とせない。

+ f(x,y):=f(x-1,y)/2+f(x-1,y-1)/2
+ f(x,0):=f(x,x)/2

という式にはすぐに気付けた。グラフも書いた。

```
↱-----↴
A←B←C←D
  ↓ ↓ ↓
  S T U
```

こんな？2^-xしか出てこないことを数式としてちゃんと書けば良かった。

`A=B/2+C/4+D/8+A/16`
`A*(2^x-1)/(2^x)=B/2+C/4+D/8`

このような雰囲気の式が紙に残っていた。当たり前だけれどグリッドを思い浮かべて

`A*(2^x-1)/(2^x)=U/4+T/8+S/16`

の方が適切。しかもAだけで満足していたようだけれど

`B*(2^x-1)/(2^x)=U/4+T/8+S/2`

といいたふうにBも式で書けば何か思いつけたかもしれない。

Aの部分だけO(N)で計算して、2^-xの係数を適切に操作すれば残りが容易に計算できてO(N^2)に落とせるという問題だった。

## 感想
+ 困ったら手で式を書け。
+ [こたつがめさんの手元動画](https://www.youtube.com/watch?v=qOveIfdOF0M)が面白かった。
  + `dp(n):=n人の列で人nが末尾に並んでいる確率` は賢い。
  + `N<=3000` を見て状態が `O(N^2)` で遷移が `1` を思い浮かべてしまったけれど状態が `O(N)` で遷移が `O(N)` でも問題なかったはず。
