# 競プロ典型 90 問 037 - Don't Leave the Spice（★5）
W,Nが小さいことに注目する。
使用料を範囲で決められるということでセグ木やBITも思い浮かべる。でもWN<=10^6だし難しいデータ構造は不要かもしれない。
最初はいつも通りどのようなグラフ（DAG）になるか考える。

頂点(i番目まで見た、使用量j) -> 頂点(i+1番目まで見た、使用量j+Li)
頂点(i番目まで見た、使用量j) -> 頂点(i+1番目まで見た、使用量j+Li+1)
頂点(i番目まで見た、使用量j) -> 頂点(i+1番目まで見た、使用量j+Li+2)
頂点(i番目まで見た、使用量j) -> 頂点(i+1番目まで見た、使用量j+Ri)

Ri-Liの範囲が10^4だから愚直にループを回すとO(W^2N)くらい？これは流石に終わらない。
遷移先は連続した範囲なのでこのあたりが工夫できそう。BITをN個用意すするのかな？

それはそうと価値の最大値はどうか。BITでなく遅延セグ木でRMQにすれば分かるか。

ローリングテーブルを使って更新や1点取得が対数時間だとしてO(NWlogW)？

老害なので未だに[ACL](https://github.com/atcoder/ac-library)に頼ることに抵抗があるが楽はしよう。

TEL。えー。想定解法じゃない？

log10(W)<14だしWNlogWて14*10^6くらいでない？scanf/printf、inlineといった小手先の工夫も通じないぞ。

i番目を使用しない場合の遷移を1点更新で実現するのではなく木自体のコピーで代替してみるか・・・。

よしAC。ジャッジ解では2次元配列と遅延伝搬でないセグ木の組み合わせだった。

あー、なるほど？貰うDPに書き換えればこういった実装に出来るのか。いつも配るDPばかり書くから思い付かなかった。
