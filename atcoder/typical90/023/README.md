# 競プロ典型 90 問 023 - Avoid War（★7）
`fn(何行目、2^24):=パターン数` は大きいだろうか。2^24*24=402653184。4億。遷移がs複数あるだろうし無理そう。

とはいえ2^24のうち、横方向で条件を満たさないものを除けば数は減るはず。試しに数えてみると121393通り。12万。

キングは斜め移動できるので1ビット左右にシフトしたものへは移動できないことである程度は削れるとしても厳しい。

１行ごと遷移するのは厳しい？１マスずつ置くor置かないを考えたら遷移は2通りで、 `fn(今どのマス,121393)` 。

これなら平気？１列目に戻ることを考えると12万で収まるとは思えないけれど10倍は無いでしょうきっと。

あらー、合わない。あっ、斜め移動だから直前のwマスだけじゃ足りないのか。w+1マス。

サンプルは通りそうだけれど最大ケースが遅すぎる、手元で30secくらい。困った。

mapの操作を減らすか無くすかしないと駄目だろうか。ひとまず目一杯メモリを確保して配列で頑張ってみる。

AC。
